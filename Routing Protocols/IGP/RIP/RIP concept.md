# 1. RIP 개요

→ **RIP는 거리 벡터(Distance-Vector) 기반으로 “홉 수(Hop Count)”를 메트릭으로 사용해 경로를 선택하는 IGP이다.**

- 라우팅 방식: **Distance-Vector**
- 메트릭: **Hop Count (홉 수)**
- 최대 홉 수: **15** (16은 도달 불가)
- 소규모 네트워크에 적합
- 단순하지만 수렴이 느릴 수 있음
- 주기적으로 전체 라우팅 테이블을 광고

---

# 2. RIP 동작 과정

1. **이웃 라우터와 라우팅 정보 교환 시작**
2. 각 라우터는 **자신의 라우팅 테이블을 주기적으로 광고**
3. 광고를 받은 라우터는
   - 경로가 새로 들어오면 **라우팅 테이블에 추가**
   - 기존 경로보다 홉 수가 적으면 **갱신**
4. 장애/토폴로지 변경 발생 시
   - 잘못된 경로가 퍼질 수 있어(루프 위험)
   - 이를 막기 위해 여러 방어 기법을 사용
5. 일정 시간 동안 업데이트가 없으면 **경로를 만료 처리**
6. 최종적으로 라우팅 테이블(RIB)에 반영

---

# 3. RIP 버전 종류

## ■ RIPv1
- **클래스풀(Classful) 라우팅**
- 서브넷 마스크 정보 미포함
- VLSM/CIDR 지원 불가
- 브로드캐스트로 업데이트 전송

## ■ RIPv2
- **클래스리스(Classless) 라우팅**
- 서브넷 마스크 포함 → **VLSM/CIDR 지원**
- 멀티캐스트로 업데이트 전송: **224.0.0.9**
- 인증(인증 키) 기능 지원

## ■ RIPng (IPv6용 RIP)
- IPv6 환경에서 RIP 사용 버전
- 멀티캐스트: **FF02::9**
- (기본 개념은 RIPv2와 유사)

---

# 4. RIP 메트릭(홉 수) 구조

## ■ Hop Count란?
- 라우터를 하나 거칠 때마다 홉 수가 +1 증가
- **홉 수가 가장 적은 경로를 최적 경로로 선택**

### 제한
- **최대 15홉까지만 유효**
- **16홉은 unreachable(도달 불가)로 처리**

---

# 5. RIP 업데이트 타이머

RIP는 타이머 기반으로 라우팅 안정성을 관리한다.

- **Update Timer: 30초**
  - 주기적으로 라우팅 테이블 전체를 광고
- **Invalid Timer: 180초**
  - 180초 동안 업데이트 없으면 해당 경로를 “무효”로 간주
- **Hold-Down Timer: 180초**
  - 불안정한 경로가 다시 살아나는 것처럼 보이는 현상 방지(루프 억제)
- **Flush Timer: 240초**
  - 240초 동안 업데이트 없으면 라우팅 테이블에서 제거

---

# 6. RIP 루프 방지 기법

거리 벡터 특성상 **루프(Loop)**와 **Count-to-Infinity** 문제가 생기기 쉬움  
→ RIP는 다음 기법들로 완화한다.

1. **Split Horizon**
   - 배운 경로를 다시 그 방향으로 광고하지 않음
2. **Route Poisoning**
   - 장애 난 경로를 **Hop Count=16**으로 광고(도달 불가로 “독” 표시)
3. **Poison Reverse**
   - Split Horizon 강화 버전  
   - “그쪽 경로는 16이야(못 가)”를 명시적으로 다시 보냄
4. **Hold-Down**
   - 경로 변동이 잦을 때 잠깐 업데이트를 보류해 불안정 확산 방지

---

# 7. RIP 패킷/전송 특징

- (IPv4 기준)
  - **RIPv1: 브로드캐스트**
  - **RIPv2: 멀티캐스트 224.0.0.9**
- 전송 계층: **UDP**
- 포트 번호: **UDP 520**  
  - (RIPng는 UDP 521)

---

# 8. RIP 라우팅 테이블 특징

- 라우터는 이웃으로부터 받은 경로에 대해
  - “이 경로까지 가려면 이웃 라우터 거쳐야 함”
  - 홉 수를 +1 하여 저장
- 최적 경로 선택 기준이 단순함:
  - **홉 수가 가장 적은 경로 = 최적 경로**

---

# 9. RIP 수렴(Convergence) 특징

- 장점: 단순하고 설정이 쉬움
- 단점:
  - **주기적 업데이트(30초)** 기반이라 변화 반영이 느릴 수 있음
  - 루프 완전 방지는 어려움(완화만 가능)
  - **대규모 네트워크에 부적합(15홉 제한)**

---

# 10. RIP 핵심 특징 요약

- Distance-Vector 기반
- 메트릭은 Hop Count
- 최대 15홉 제한 → 소규모용
- 주기적(30초) 전체 업데이트
- 루프 방지 기법(Split Horizon / Poisoning / Hold-Down 등) 사용
- RIPv2는 VLSM/CIDR 지원 + 멀티캐스트 + 인증 지원
