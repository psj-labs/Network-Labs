# IPv6 개념 정리 (Security & Networking Notes)

================================================================================
## 1. IPv6 주소 기본 구조
================================================================================

주소 길이 : **128bit (16 Byte)**

표기법 :  
**16진수 4자리 단위 8블록, `:`로 구분**

예)  
2001:0db8:0000:0000:0000:0000:0000:0001

### 압축 규칙
① 선행 0 제거 가능  
② 연속된 0 블록은 `::`로 **1회만** 압축 가능

압축 예)

2001:0db8:0000:0000:0000:0000:0000:0001  
→ 2001:db8:0:0:0:0:0:1  
→ 2001:db8::1

================================================================================
## 2. IPv6 특수 주소
================================================================================

### ■ 불특정 주소 (Unspecified Address)
표기 : `::`  
의미 :
- IPv6 주소 미할당 상태
- DHCPv6 요청 출발지 주소

IPv4 대응 : `0.0.0.0`

---

### ■ 루프백 주소 (Loopback Address)
표기 : `::1`  
의미 :
- 자기 자신 테스트 주소

사용 예 :

ping ::1

IPv4 대응 : `127.0.0.1`

---

### ■ 링크 로컬 주소 (Link-Local)
대역 : `fe80::/10`

특징 :
- 인터페이스 자동 할당
- 동일 네트워크 구간 통신용
- 라우터 통과 불가
- **NDP 기본 통신 주소**

---

### ■ 멀티캐스트 주소
대역 : `ff00::/8`

특징 :
- IPv4 Broadcast 대체
- **1:N 그룹 통신**

예)

ff02::1   → 모든 노드  
ff02::2   → 모든 라우터  

================================================================================
## 3. IPv6 주소 유형
================================================================================

■ 유니캐스트 : 1:1 통신

■ 멀티캐스트 : 1:N 그룹 통신

■ 애니캐스트 (Anycast)

특징 :
- 동일 IP 주소 여러 서버에 할당
- **BGP 라우팅으로 가장 가까운 노드 1대로 연결**

사용 예 :
- Root DNS
- Google DNS (8.8.8.8)
- Cloudflare DNS (1.1.1.1)

================================================================================
## 4. IPv6 주소 할당 방식
================================================================================

### ■ SLAAC
- Router Advertisement(RA) 기반 자동 주소 구성
- DHCP 서버 불필요
- **ICMPv6 기반 동작**

---

### ■ DHCPv6
- IPv4 DHCP와 동일 개념
- 중앙 서버에서 주소 관리

---

### ■ Dual Stack
- **IPv4 + IPv6 동시 사용**
- 현재 실무 기본 운영 형태

================================================================================
## 5. NDP (Neighbor Discovery Protocol)
================================================================================

IPv4 ARP 완전 대체 프로토콜  
**ICMPv6 기반 동작**

주요 기능 :
- MAC 주소 탐색
- 이웃 노드 탐지
- 라우터 탐색
- 주소 중복 검사(DAD)
- SLAAC 보조

### NDP 핵심 메시지

- RS (Router Solicitation)
- RA (Router Advertisement)
- NS (Neighbor Solicitation)
- NA (Neighbor Advertisement)
- Redirect

================================================================================
## 6. ICMPv6
================================================================================

IPv6 제어 메시지 프로토콜

역할 :
- 오류 보고
- 네트워크 진단(ping, traceroute)
- PMTUD 수행
- **NDP 메시지 전달**

→ **IPv6 네트워크 필수 코어 제어 프로토콜**

================================================================================
## 7. IPv6 패킷 헤더 특징
================================================================================

IPv4 대비 단순 구조

- Header 체크섬 제거 → 성능 향상
- 옵션 필드 제거 → **확장 헤더 방식**
- Fragment는 **송신단만 수행**
- 라우터 Fragment 금지

================================================================================
## 8. Flow Label
================================================================================

20bit 흐름 식별 필드

목적 :
- QoS 적용
- 동일 트래픽 흐름 식별
- 로드밸런싱 보조

중요 :

**Flow Label ≠ 연결지향**  
TCP 처럼 세션 관리 기능 없음

================================================================================
## 9. NAT
================================================================================

IPv6는 NAT 기본 사용 안 함

- 모든 단말이 **글로벌 유니캐스트 주소 직접 사용**
- 방화벽 필수 구성

================================================================================
## 10. DNS + Anycast
================================================================================

DNS 네임서버는 **Anycast 구조** 사용

동일 IP 주소 공유  
→ 전 세계 서버 다중 배치  
→ 사용자 요청은 **최단 거리 노드로 자동 연결**

효과 :
- 응답 속도 향상
- DDoS 분산
- 장애 자동 우회

================================================================================
## 11. 보안 관점 핵심 포인트
================================================================================

IPv6 주요 공격 벡터

- **SLAAC Spoofing**
- **NDP Spoofing** (ARP Spoof 대응 공격)
- **ICMPv6 Flood**
- **IPv6 방화벽 설정 누락 우회**
- **RA Flood**
