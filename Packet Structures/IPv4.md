# IPv4 Header Structure (Base 20 bytes, Max 60 bytes)

```text
################################################################################
                    IPv4 Header (Base 20 bytes, Max 60 bytes)
################################################################################

┌────────┬────────┬────────┬────────┬──────────────────────────────┐
│Version │  IHL   │  DSCP  │  ECN   │          Total Length        │
│ (4bit) │ (4bit) │ (6bit) │ (2bit) │            (2 bytes)         │
└────────┴────────┴────────┴────────┴──────────────────────────────┘

┌────────────────────────────────────────────────────────────────────┐
│                       Identification (2 bytes)                     │
└────────────────────────────────────────────────────────────────────┘

┌───────────────┬────────────────────────────────────────────────────┐
│    Flags      │              Fragment Offset (13 bits)             │
│    (3 bits)   │                                                    │
└───────────────┴────────────────────────────────────────────────────┘

┌───────────┬──────────────────┬────────────────────────────────────┐
│    TTL    │    Protocol      │           Header Checksum          │
│  (1 byte) │    (1 byte)      │              (2 bytes)             │
└───────────┴──────────────────┴────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────┐
│                         Source IP Address (4 bytes)                │
└────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────┐
│                      Destination IP Address (4 bytes)              │
└────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────┐
│                     Options (0 ~ 40 bytes, optional)               │
└────────────────────────────────────────────────────────────────────┘


Version (4 bits)
 : IP 버전 번호
   예시 → 4 (IPv4)

IHL – Internet Header Length (4 bits)
 : 헤더 길이(32-bit word 단위)
   예시 → 5  → 5 × 4 = 20 bytes

DSCP (6 bits)
 : QoS 트래픽 분류 값
   예시 → 0

ECN (2 bits)
 : 혼잡 알림 표시
   예시 → 0

Total Length (2 bytes)
 : IP 헤더 + 데이터 전체 길이
   예시 → 60 bytes

Identification (2 bytes)
 : 단편화 재조합 식별 번호
   예시 → 0x1C46

Flags (3 bits)
 : 단편화 제어 플래그
   - DF = 1 : 단편화 금지
   - MF = 1 : 추가 단편 있음
   예시 → DF = 1

Fragment Offset (13 bits)
 : 조각 순서 위치 값
   예시 → 0

TTL – Time To Live (1 byte)
 : 라우터 홉 감소용 수명 필드
   예시 → 64

Protocol (1 byte)
 : 상위 전송계층 식별자
   예시 → 6 (TCP)
           17 (UDP)
           1 (ICMP)

Header Checksum (2 bytes)
 : IPv4 헤더 오류 검출용 체크섬
   예시 → 0xB861

Source IP Address (4 bytes)
   예시 → 192.168.0.10

Destination IP Address (4 bytes)
   예시 → 142.250.206.78

Options (0 ~ 40 bytes, optional)
 : 확장 기능 필드
   - IHL > 5 일 때 존재
   - 최대 헤더 크기 60 bytes
   예시 →
     Security
     Timestamp
     Record Route
     Loose Source Route
     Strict Source Route
